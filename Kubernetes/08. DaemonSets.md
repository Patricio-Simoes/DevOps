---
Date: 2025-01-12
Technology: Kubernetes
tags:
  - Container_Orchestration
  - DevOps
---
**Table of Contents**

- [08. DaemonSets](#08-daemonsets)
  - [Creating a new DaemonSet](#creating-a-new-daemonset)
  - [DaemonSet Commands](#daemonset-commands)
    - [Checking DaemonSet information](#checking-daemonset-information)
    - [Editing a DaemonSet after it is deployed](#editing-a-daemonset-after-it-is-deployed)
    - [Replacing a DaemonSet](#replacing-a-daemonset)
    - [Deleting a DaemonSet](#deleting-a-daemonset)

# 08. DaemonSets

A DaemonSet is very similar to a [ReplicaSet](03.%20ReplicaSets.md#03.%20ReplicaSets), the difference however, is that a DaemonSet **ensures a particular [pod](02.%20Pods.md#02.%20Pods) runs on every [node](01.%20Overview.md#Nodes%20(Minions))** of the cluster. 

This is particularly useful for tasks that need to be handled at the node level, such as monitoring, logging, or networking.

## Creating a new DaemonSet

DaemonSets are created from a YAML file using the following structure:

```yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: monitoring-daemonset
  labels:
    type: monitoring
spec:
  template:
    metadata:
      labels:
        app: monitoring-agent
    spec:
      containers:
        - name: monitoring-agent
          image: monitoring-agent
  selector:
    matchLabels:
      app: monitoring-agent
```

Then, using `kubectl`, run:

```bash
kubectl apply -f <file-name>
```

## DaemonSet Commands

### Checking DaemonSet information

To list available DaemonSets, using `kubectl` run:

```bash
kubectl get daemonset -n <namespace>
# This will also work:
kubectl get ds -n <namespace>
# For slightly more detailed information:
kubectl get ds -n <namespace> -o wide
```

To describe a DaemonSet, using `kubectl` run:

```bash
kubectl describe ds/<ds_name> -n <namespace>
```

To check the logs of a DaemonSet, using `kubectl` run:

```bash
kubectl logs <ds_name> -n <namespace>
```

### Editing a DaemonSet after it is deployed

To edit an existing DaemonSet, using `kubectl`run:

```bash
kubectl edit ds/<ds_name> -n <namespace>
```

###  Replacing a DaemonSet

To replace a DaemonSet, using `kubectl`, run:

```bash
kubectl replace -f <ds_definition>.yaml
```

###  Deleting a DaemonSet

To delete a DaemonSet, using `kubectl`, run:

```bash
kubectl delete ds/<ds_name> -n <namespace>
```

**Warning:** This will delete all pods managed by the DaemonSet.