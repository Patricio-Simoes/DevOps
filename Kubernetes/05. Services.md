---
Date: 2025-12-07
Technology: Kubernetes
tags:
  - Container_Orchestration
  - DevOps
---
**Table of Contents**

- [05. Services](#05-services)
  - [Types of Services](#types-of-services)
    - [NodePort](#nodeport)
    - [ClusterIP](#clusterip)
    - [Load Balancer](#load-balancer)
  - [Service Commands](#service-commands)
    - [Checking Service information](#checking-service-information)

# 05. Services

Kubernetes Services **enable communication between various components** within and outside of an application. They are an abstract way to expose an application running on a set of [pods](02.%20Pods.md#02.%20Pods).

Services are created using YAML files with the following `kubectl`command:

```bash
kubectl apply -f service.yaml
```

## Types of Services

### NodePort

The NodePort service type is used to **map a port on a [node](01.%20Overview.md#Nodes%20(Minions)), to a port on a [pod](02.%20Pods.md#02.%20Pods)**.

In reality, there are 3 ports involved in this type of service:

1. **Target Port** : Port where the application is exposed:
2. **Port** : Intermediary port, this is the service port;
3. **Node Port** : Port used to access the application when connecting to the [node](01.%20Overview.md#Nodes%20(Minions)).
	- **Note:** Node Ports range from ports 30000-32767.

Here is an example mapping the [node](01.%20Overview.md#Nodes%20(Minions)) port 30008 to a [pod](02.%20Pods.md#02.%20Pods) port 80:

<div align="center">
    <img src="../Assets/Images/Diagrams/Kubernetes/Services - NodePort.png" alt="Services - NodePort">
</div>

This type of configuration is created with the following YAML:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  type: NodePort
  ports:
    - targetPort: 80
      port: 80
      nodePort: 30080
    - targetPort: 443
      port: 443
      nodePort: 30443
  selector:
    app: myapp
    type: front-end
```

In a Production scenario, where multiple [nodes](01.%20Overview.md#Nodes%20(Minions)) and [pods](02.%20Pods.md#02.%20Pods) exist, Kubernetes will automatically span the service across the [nodes](01.%20Overview.md#Nodes%20(Minions)) and maps the target port to the same [node](01.%20Overview.md#Nodes%20(Minions)) port in all [nodes](01.%20Overview.md#Nodes%20(Minions)) of the cluster:

Kubernetes - Services - NodePort Multi-Node

<div align="center">
    <img src="../Assets/Images/Diagrams/Kubernetes/Services - NodePort Multi-Node.png" alt="Services - NodePort Multi-Node">
</div>

**Note:** Incoming traffic will be randomly distributed across [nodes](01.%20Overview.md#Nodes%20(Minions)).

### ClusterIP

The ClusterIP service type is the default type, (when the type is omitted in the YAML specification, it will assume the value of `ClusterIP`).

It's primary objective is to **provide a stable IP address for service discovery**, however, this IP address is not accessible from outside the cluster.

<div align="center">
    <img src="../Assets/Images/Diagrams/Kubernetes/Services - ClusterIP.png" alt="Services - ClusterIP">
</div>

This type of service configuration is created with the following YAML:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  type: ClusterIP # Optional since this the default value.
  ports:
    - targetPort: 80
      port: 80
  selector:
    app: myapp
    type: front-end
```

### Load Balancer

The LoadBalancer service type is used to **expose a service to external traffic through a cloud provider's** load balancer.

<div align="center">
    <img src="../Assets/Images/Diagrams/Kubernetes/Services - Load Balancer.png" alt="Services - Load Balancer">
</div>

This type of configuration is created with the following YAML:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  type: LoadBalancer
  ports:
    - targetPort: 80
      port: 80
      nodePort: 30080
```

## Service Commands

### Checking Service information

To list available Services, using `kubectl` run:

```bash
kubectl get services -n <namespace>
# Same effect.
kubectl get svc -n <namespace>
# For slightly more detailed information:
kubectl get svc -n <namespace> -o wide
```